# Pillaging

Pillaging is the collection of sensitive data to prove access to a certain machine or to gather data
useful for other activities.

Metasploit has a set of premade scripts that can help us, and of course it is possible to inspect
the scripts and check what OS commands are run.


* `sysinfo` will display for us basic information about the machine, such as OS, architecture, Windows
domain etc.
* `getuid` will show information about the current user (equivalent to `id` for Linux).
* `post/windows/gather/enum_services` lists the services which are enabled on the machine
  (equivalent to `wmic service get Caption,StartName,State,pathname').
* `net start` in a Windows shell lists the services currently running.
* `ps` in Meterpreter works as in Linux, listing current processes.
* `post/windows/gather/enum_domains` is the equivalent of `net view /domain`, which lists
  information about the Windows domain.
* `net group "Domain Controllers" /domain` will list the Domain Controllers.
* `net user` or `cat /etc/passwd` will list the users on, respectively, a Windows and a Linux
  machine.
* If the Windows machine is in a domain, we can use `post/windows/gather/enum_ad_users` to list
  accounts in the default active domain (similar to `net user /domain`).
* `net localgroup [GROUP]` lists the groups or the members of a specific groups on Windows.
* `post/windows/gather/enum_shares` or `net shares` will list the shares active.
* `scraper`, Meterpreter script that harvers system information like network share, registry hives
  and password hashes.
* `winenum`, Meterpreter script that runs many commands and gathers all sort of information about
  the system.
* `keyscan_start` or `keylogrecorder` are two Meterpreter scripts that will allow to record
  keystrokes on the machine. (Note that depending what keys we want to record, the process needs to
  be attached to `winlogon.exe` or to `explorer.exe`)
* `screenshot` is a Meterpreter script that can take a screenshot of the target machine current
  screen.
* `post/windows/gather/credentials*` there are several scripts that look for credentials for
  specific applications (e.g., Google Chrome, ftpx etc.).
* `post/windows/gather/enum_applications` can be used to enumerate the applications installed on the
  machine.

